import{S as i}from"./util.cc44b56e.js";/* empty css             */console.log({SERVER_URL:i});async function f(){const{total_rows:t,unique_user_count:s}=await(await fetch(`${i}user-count`)).json(),r=new Intl.NumberFormat().format(t),n=new Intl.NumberFormat().format(s),o=document.querySelector("#responses");o.innerHTML=`${r} responses so far from ${n} users`,o.style.display="inline-block",await p(),document.querySelector("#chart-loading").style.display="none"}f();if(localStorage.getItem("results")){const t=JSON.parse(localStorage.getItem("results"));t.guesses.length>0&&(document.querySelector("#results-text").innerHTML=`Total answered: ${t.guesses.length}. Correct: ${t.guesses.filter(s=>s.correct).length}`,document.querySelector("#your-data-container").style.display="block")}async function p(){const t=await(await fetch(`${i}global-user-summary`)).json();function s(o,a){let l=o.map(e=>({...e,total:e.total,accuracy:Math.round(e.correct/e.total*100)}));l=l.filter(e=>e.total>=21);const c=100/a,b=Array.from({length:a},()=>[]);l.forEach(e=>{const u=Math.min(Math.floor((e.accuracy-0)/c),a-1);b[u].push(e)});const d=[];for(let e=0;e<a;e++){const u=(e*c).toFixed(0),y=((e+1)*c).toFixed(0);d.push(`${u} - ${y}`)}return{buckets:b,labels:d}}const r=s(t,10);console.log(r);const n=document.querySelector("#chart");new Chart(n,{type:"bar",data:{labels:r.labels,datasets:[{borderColor:"#fa6b6b",backgroundColor:"#fa6b6b",label:"",data:r.buckets.map(o=>o.length),borderWidth:1}]},options:{plugins:{tooltip:{enabled:!1},legend:{display:!1}},scales:{x:{title:{display:!0,text:"% accuracy"}},y:{ticks:{stepSize:1},title:{display:!0,text:"# of players"},beginAtZero:!0}}}})}
